<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Data</title>

<script src="site_libs/header-attrs-2.24/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.0/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.0/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="About.html">About</a>
</li>
<li>
  <a href="Data.html">Data</a>
</li>
<li>
  <a href="EDA.html">EDA</a>
</li>
<li>
  <a href="Regression_Analysis.html">Regression Analysis</a>
</li>
<li>
  <a href="Final-Report.html">Final Report</a>
</li>
<li>
  <a href="https://tianyiw44.shinyapps.io/p8105_final_shiny/">Shiny APP</a>
</li>
<li>
  <a href="mailto:&lt;sc5078@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/YvonneChen22/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Data</h1>

</div>


<div id="background-information-of-the-datasets" class="section level1">
<h1>Background Information of the datasets</h1>
<div id="motivation" class="section level2">
<h2>Motivation</h2>
<p>Every fairy tale concludes with the prince and princess living
happily ever after. These are our most innocent and sincere wishes.
However, as modern individuals lament the mounting pressures of work and
life, alongside the escalating issues of depression and other mental
health disorders, our happiness seems elusive. Happiness has become a
crucial measurement of our well-being as well as a nation’s success.
It’s a fundamental human right, just like health. Every person has the
right to happiness; it is affecting us both mental and physical health.
It has also become an integral indicator for national policy and
operational objective for governments.</p>
<p>But how do we quantify happiness? What are the sources of our
happiness? Are we truly happy or unhappy? Is the world happy? How can we
enhance our level of happiness? These are the questions we seek to
answer through this project. Understanding what drives happiness can
help in formulating policies that improve the quality of life for
citizens. By studying the factors that affect happiness, we can
contribute to a multidisciplinary understanding of well-being, which in
turn can inform a variety of practical applications aimed at improving
people’s lives at both the individual and collective levels.</p>
</div>
<div id="data-acquisition" class="section level2">
<h2>Data Acquisition</h2>
<p>We sourced our data from The World Happiness Report, first published
in 2012. This report gathers surveys from a nationally-representative
sample of individuals, inquiring about their life satisfaction and their
views on six factors: income, health, having reliable support, freedom
to make life decisions, generosity, and the absence of government
corruption. It then ranked around 155-158 countries base on the
happiness score collected each year. We chose to utilize The World
Happiness Reports published between 2015 and 2019, the pre-COVID period.
The data can be accessed <a
href="https://www.kaggle.com/datasets/unsdsn/world-happiness">here</a>.
Each year’s report is available as a separate CSV file, resulting in a
total of five datasets. Each dataset comprises various variables,
necessitating data cleaning and merging for analysis.</p>
</div>
<div id="data-merging-and-cleaning" class="section level2">
<h2>Data merging and cleaning</h2>
<p>We imported five dataset into RStudio. In order to merge them, we
need to make sure all datasets have the same variables. We first updated
all variable to <code>snake cases</code>, removed the unwanted variables
and added a <code>year</code> variable representing the year for each
dataset. Because only <code>2015</code> and <code>2016</code> data
recorded <code>region</code> for each <code>country,</code> we extracted
the <code>country</code> and <code>region</code> variables into separate
data frame and <code>left_join</code> it into <code>2017</code>,
<code>2018</code> and <code>2019</code> by <code>country</code>. We then
stack all five dataset into our final dataset using
<code>bind_row</code>. We then check if there’s any missing or miscoded
values. Because there are new counties entering into the survey and
ranking in 2017, 2018 and 2019, with no region recorded, and the dataset
records same country differently in each year. We manually updated the
value using <code>mutate()</code>. The code is read as following:</p>
<pre class="r"><code>data2015_df = read_csv(&quot;./data/2015.csv&quot;)|&gt;
  janitor::clean_names()|&gt;
  mutate(year=2015)|&gt;
  select(- standard_error, -dystopia_residual)|&gt;
  select(year, country, region, rank, score, everything() )

data2016_df = read_csv(&quot;./data/2016.csv&quot;)|&gt;
  janitor::clean_names()|&gt;
  mutate(year=2016)|&gt;
  select(- lower_confidence_interval, - upper_confidence_interval, -dystopia_residual)|&gt;
  select(year, country, region, rank, score, everything() )

region_df = data2015_df|&gt;
  select(country, region)

data2017_df = read_csv(&quot;./data/2017.csv&quot;)|&gt;
  janitor::clean_names()|&gt;
  mutate(year=2017)|&gt;
  select(- whisker_high, - whisker_low, -dystopia_residual)|&gt;
  select(-generosity, everything(), generosity)

data2017_df = left_join(data2017_df, region_df)|&gt;
  select(year, country, region, everything())|&gt;
  mutate(
    
  )

data2018_df = read_csv(&quot;./data/2018.csv&quot;)|&gt;
  janitor::clean_names()|&gt;
  mutate(
    year=2018)|&gt;
  select(-generosity, everything(), generosity)

data2018_df = left_join(data2018_df, region_df)|&gt;
  select(year, country, region, everything())|&gt;
  mutate(
    perception_of_corruption = as.numeric(perception_of_corruption)
  )

data2019_df = read_csv(&quot;./data/2019.csv&quot;)|&gt;
  janitor::clean_names()|&gt;
  mutate(year=2019)|&gt;
  select(-generosity, everything(), generosity)

data2019_df = left_join(data2019_df, region_df)|&gt;
  select(year, country, region, everything())

hap_df = bind_rows(data2015_df, data2016_df, data2017_df, data2018_df, data2019_df)|&gt;
  mutate(
    region = if_else(country == &quot;Taiwan Province of China&quot;, &quot;Eastern Asia&quot;, region),
     region = if_else(country == &quot;Hong Kong S.A.R., China&quot;, &quot;Eastern Asia&quot;, region),
    region = if_else(country == &quot;Belize&quot;, &quot;Latin America and Caribbean&quot;, region),
    region = if_else(country == &quot;Somalia&quot;, &quot;Sub-Saharan Africa&quot;, region),
    region = if_else(country == &quot;Namibia&quot;, &quot;Sub-Saharan Africa&quot;, region),
    region = if_else(country == &quot;South Sudan&quot;, &quot;Sub-Saharan Africa&quot;, region),
    region = if_else(country == &quot;Trinidad &amp; Tobago&quot;, &quot;Latin America and Caribbean&quot;, region),
    region = if_else(country == &quot;Northern Cyprus&quot;, &quot;Western Europe&quot;, region),
    region = if_else(country == &quot;North Macedonia&quot;, &quot;Central and Eastern Europe&quot;, region),
    region = if_else(country == &quot;Gambia&quot;, &quot;Sub-Saharan Africa&quot;, region),
    country = if_else(country == &quot;Hong Kong S.A.R., China&quot;, &quot;Hong Kong&quot;, country),
    country = if_else(country == &quot;Northern Cyprus&quot;, &quot;North Cyprus&quot;, country),
    country = if_else(country == &quot;Somaliland region&quot;, &quot;Somalia&quot;, country),
    country = if_else(country == &quot;Taiwan Province of China&quot;, &quot;Taiwan&quot;, country),
    country = if_else(country == &quot;Trinidad &amp; Tobago&quot;, &quot;Trinidad and Tobago&quot;, country)
    )

write_csv(hap_df, &quot;./data/combined_happiness.csv&quot;)</code></pre>
</div>
<div id="final-dataset-description" class="section level2">
<h2>Final Dataset Description</h2>
<p>The final dataset has 782 observations. There are 11 variables:</p>
<p><code>year</code>: The year of the surveys.</p>
<p><code>country</code>: Name of the countries.</p>
<p><code>region</code>: region of the countries. There are 10 regions in
the Dataset.</p>
<p><code>rank</code>: Rank of the countries base on happiness score.</p>
<p><code>score</code>: Happiness Score of the countries, with 10
representing the best possible life and 0 being the lowest.</p>
<p><code>gdp_per_capita</code>: Measurement on income and GDP per
Capital, value ranges from 0 – 2.10.</p>
<p><code>social support</code>: Measurement on having someone to count
on in times of trouble, value ranges from 0 to 1.65.</p>
<p><code>health_life_expectancy</code>: Measurement on healthy life
expectancy, which also reflects mental and physical health, value ranges
from 0 to 1.15.</p>
<p><code>freedom_to_make_choices</code>: Measurement on freedom to
choose what you do with your life, which also reflects human rights.
Human rights include the right to life and liberty, freedom from slavery
and torture, freedom of opinion and expression, the right to work and
education, and many more. Everyone is entitled to these rights without
discrimination. Value ranges from 0 – 0.75.</p>
<p><code>perception_of_corruption</code>: Measurement on if people think
there’s corruption widespread throughout the government and within
businesses, and if people trust their governments and have trust in the
benevolence of others. Values ranges from 0 – 0.6. Please note that
higher scores representing lower perception of corruption and higher
trust of the government.</p>
<p><code>generosity</code>: Measurement on if people donated money to
the charity, which is a sense of positive community engagement. Value
ranges from 0-0.85.</p>
<p><code>year</code>, <code>country</code> and <code>region</code> is
factor and categorical variables. All the other variables are numeric
and continuous variables.</p>
<p>Later in the data analysis, we also added the ISO3 code
(<code>ISO3</code>) to the dataset for the purpose of outputting
geographic plot.</p>
</div>
<div id="mission-statement" class="section level2">
<h2>Mission Statement</h2>
<p>Our mission is to conduct a comprehensive analysis of the factors
influencing global happiness scores across the years 2015 to 2019.
Through in-depth exploration and examination of Economic production (gdp
per capita), social support, life expectancy, freedom, absence of
corruption, and generosity, we aim to identify and understand the key
determinants that contribute to varying happiness levels among nations
during this period. By regression analysis, our goal is to unravel the
relationships between happiness score and six factors. Other research
questions help us know more about the distribution happiness score, and
six factors, respectively. Ultimately, our research seeks to provide
insights that can illuminate policy decisions and societal
interventions, health system development fostering a deeper
understanding of what drives happiness worldwide and how it evolves over
time.</p>
<p><a href="index.html">Back To Home</a></p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
